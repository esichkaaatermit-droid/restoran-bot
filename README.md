# Telegram-бот для персонала Бистро «ГАВРОШ»

Бот для управления персоналом ресторана: меню, обучение, аттестация, чек-листы, стоп/go-листы, мотивация.

## Архитектура

- **Telegram Bot** (aiogram 3) — основной интерфейс для сотрудников и менеджеров
- **Google Sheets** — управление контентом (меню, обучение, тесты, чек-листы, мотивация, доступ)
- **PostgreSQL** — хранение данных, прогресса, результатов тестов
- **APScheduler** — ежедневная автосинхронизация из Google Sheets

## Структура Google Sheets (15 листов)

| Лист | Содержимое |
|------|-----------|
| Доступ | Сотрудники: ФИО, телефон, должность, филиал, активен |
| Завтраки | Меню кухни |
| Основное меню | Меню кухни |
| Сезонное меню | Меню кухни |
| Выпечка и десерты | Меню кухни |
| Безалкогольные напитки | Меню бара |
| Алкогольные напитки | Меню бара |
| Обучение хостес | Материалы для хостес |
| Обучение официанты | Материалы для официантов |
| Обучение бармены | Материалы для барменов |
| Обучение менеджеры | Материалы для менеджеров |
| Чек-лист официанты | Задачи для официантов |
| Чек-лист менеджеры | Задачи для менеджеров |
| Тесты | Вопросы и ответы аттестации |
| Мотивация | Мотивационные сообщения |

## Функционал бота

### Для сотрудников
- Просмотр меню (кухня/бар) с составом, КБЖУ, ценами
- Обучающие материалы по должности
- Прохождение тестов (аттестация)
- Чек-листы задач по должности
- Стоп/Go-листы
- Мотивационные сообщения

### Для менеджеров (админ-панель в боте)
- Управление сотрудниками (добавление, блокировка, отвязка Telegram)
- Управление стоп/go-листами с рассылкой
- Загрузка фото блюд
- Загрузка файлов обучения (PDF, видео)
- Включение/выключение аттестации
- Массовая рассылка
- Синхронизация из Google Sheets
- Статистика

## Запуск

### Настройка
1. Скопируйте `.env.example` в `.env` и заполните
2. Создайте сервис-аккаунт Google и сохраните `credentials.json`
3. Дайте сервис-аккаунту доступ к Google Sheets

### Docker
```bash
docker-compose up -d
```

### Локально
```bash
pip install -r requirements.txt
python -m bot.main
```

## Переменные окружения

| Переменная | Описание |
|------------|----------|
| BOT_TOKEN | Токен Telegram-бота |
| DATABASE_URL | URL подключения к PostgreSQL |
| GOOGLE_SHEETS_ID | ID Google-таблицы |
| GOOGLE_CREDENTIALS_FILE | Путь к credentials.json |
| AUTO_SYNC_HOUR | Час автосинхронизации (МСК, по умолчанию 6) |
